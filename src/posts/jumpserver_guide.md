---
isOriginal: true
date: 2024-07-23
category: "网络"
tag: [
   "JumpServer",
   "运维",
]
cover: "https://jumpserver.org/images/logo/logo-dark-JumpServer.svg"
---


# JumpServer 介绍及安装部署

## JumpServer 介绍

### 为什么需要堡垒机

以更安全的⽅式管控和登录各种类型的资产。

![](/imgs/jumpserver_guide/img02.png)

堡垒机的 4A 能力

- 身份鉴别 Authentication &nbsp;&nbsp;&nbsp; <HopeIcon icon="right-long"/> &nbsp;&nbsp;&nbsp; 防⽌ **身份冒⽤** 和 **复⽤**
- 授权控制 Authorization &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <HopeIcon icon="right-long"/> &nbsp;&nbsp;&nbsp; 防止内部**误操作**和**权限滥用**
- 账号管理 Accounting &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <HopeIcon icon="right-long"/> &nbsp;&nbsp;&nbsp; 人员和资产的管理
- 安全审计 Auditing &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <HopeIcon icon="right-long"/> &nbsp;&nbsp;&nbsp; **追溯**的保障和**事故分析**的依据


### 什么是 JumpServer

JumpServer 是广受欢迎的开源堡垒机，是符合 4A 规范的专业运维安全审计系统。JumpServer 堡垒机帮助企业以更安全的方式管控和登录各种类型的资产，包括：

| 类型       | 内容                                                        |
|------------|-------------------------------------------------------------|
| SSH        | Linux / Unix / 网络设备 等                                   |
| Windows    | Web 方式连接 / 原生 RDP 连接                                 |
| 数据库     | MySQL / MariaDB / PostgreSQL / Oracle / SQLServer / ClickHouse 等 |
| NoSQL      | Redis / MongoDB 等                                           |
| GPT        | ChatGPT 等                                                   |
| 云服务     | Kubernetes / VMware vSphere 等                               |
| Web 站点   | 各类系统的 Web 管理后台                                      |
| 应用       | 通过 Remote App 连接各类应用                                 |



![JumpServer的能力范围](/imgs/jumpserver_guide/img01.png)


| 身份鉴别 Authentication | 授权控制 Authorization | 账号管理 Accounting | 安全审计 Auditing        |
|--------------------------|------------------------|----------------------|--------------------------|
| 登录认证                 | 多维度授权 | 账号列表             | 会话审计                 |
| MFA认证                   | 资产授权               | 账号模板             | 录像审计                 |
| 登录复核                 | 动作授权               | 账号推送             | 命令审计                 |
| 登录限制                 | 时间授权               |                      | 文件传输                 |
|                          | 命令过滤               |                      | 实时监控                 |
|                          | 文件管理               |                      | 登录日志                 |
|                          | 协议授权               |                      | 操作日志                 |


![UI展示](/imgs/jumpserver_guide/img03.png)

### JumpServer 系统架构
JumpServer 采用分层架构，分别是负载层、接入层、核心层、数据层、存储层。

应用架构图如下：

![](/imgs/jumpserver_guide/img04.png)


其中，多个组件间大致的架构如下图所示：

![](/imgs/jumpserver_guide/img05.png)

## JumpServer 安装部署
支持 Linux单机部署、Linux集群部署、k8s模式部署
### 环境要求

- 支持主流 Linux 发行版本（基于 Debian / RedHat，包括国产操作系统）

| 操作系统       | 架构     | Linux 内核 | 软件要求                            | 最小化硬件配置               |
|----------------|----------|------------|-------------------------------------|------------------------------|
| linux/amd64    | x86_64   | >= 4.0     | wget, curl, tar, gettext, iptables, python | 2 Core / 8GB RAM / 60G HDD   |
| linux/arm64    | aarch64  | >= 4.0     | wget, curl, tar, gettext, iptables, python | 2 Core / 8GB RAM / 60G HDD   |

### 部署演示（Linux单机部署）

1.从官网[https://community.fit2cloud.com/#/products/jumpserver/downloads](https://community.fit2cloud.com/#/products/jumpserver/downloads)下载最新的离线安装包，并上传至部署服务器``` /opt ``` 目录；

2.解压缩;
``` bash
# 进入 /opt 目录
cd /opt

# 解压缩安装包
tar -xf jumpserver-ce-v4.0.2-x86_64.tar.gz

# 进入安装包目录
cd jumpserver-ce-v4.0.2-x86_64
```

3.安装；
``` bash
# 安装
./jmsctl.sh install

# 启动
./jmsctl.sh start
```

4.访问登录

>地址: http://<JumpServer服务器IP地址>:<端口默认80>
>
>用户名: admin
>
>密码: ChangeMe


## JumpServer管理员手册
该章节包含JumpServer堡垒机**管理员**基础功能配置

### 页面说明

![](/imgs/jumpserver_guide/img06.png)

- **控制台**：管理员操作入口，通过控制台，管理员可进行用户管理、资产管理、应用管理、账号管理、权限管理、访问控制等配置。
- **审计台**：审计员操作入口，通过审计台，审计员可查看各会话的连接详细信息及各类型日志,组织审计员只能够看到该组织下的相关数据。
- **工作台**：普通用户操作入口，通过工作台，普通用户可以通过工作台看到自己有权限操作运维的资产。

### 用户管理
1. 创建用户
  - 进入``` 控制台 ```
  - 点击``` 用户管理 ``` - ``` 用户列表 ``` 页面的``` 创建 ```按钮，进入用户详细创建页面。

![](/imgs/jumpserver_guide/img08.png)

| 参数        | 说明                                                                                                                                               |
|-------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| 名称        | 用户识别名称，可重复。                                                                                                                             |
| 用户名      | 登录 JumpServer 的登录账号，不可重复。                                                                                                              |
| 邮箱        | 登录账号对应的邮箱地址，不可重复。                                                                                                                  |
| 用户组      | 将用户按组进行管理，主要用于资产授权，当某个资产对某个用户组授权时，这个用户组所有的用户都对这个资产有相应的权限。                                     |
| 密码策略    | 密码在管理员创建用户的过程中可以自主设置；也可以生成密码连接，通过邮件发送给用户。JumpServer 会发送一条“设置用户密码”的邮件到所填写的用户邮箱。         |
| MFA         | 多因子身份认证。启用 MFA 后，用户登录时需输入用户名、密码（第一安全要素）及 MFA 设备的动态验证码（第二安全要素），提高账户安全保护。                    |
| 来源        | 指定该用户的来源，如手动创建则为“数据库”，如从 LDAP 中导入则为 “LDAP”。                                                                           |
| 系统角色    | 系统角色决定用户在系统层面的权限（如系统管理员、审计员、用户/其他自定义角色）。                                                                      |
| 组织角色    | 组织角色决定用户在组织层面的权限（如组织管理员、审计员、用户/其他自定义角色）。                                                                      |
| 激活        | 表示用户状态是否正常可登录，非激活状态用户不可登录。                                                                                                |
| 失效日期    | 指用户可进行登录的最后日期，失效后不可登录。                                                                                                        |
| 手机        | 非必填项，配置用户的手机号，用于 “MFA” 手机短信的接收。                                                                                             |
| 备注        | 非必填项，管理员配置该用户的备注信息。                                                                                                              |

2. 创建用户组
  - 进入``` 控制台 ```
  - 点击``` 用户管理 ``` - ``` 用户组 ``` 页面的``` 创建 ```按钮，进入用户组创建页面。

![](/imgs/jumpserver_guide/img09.png)

| 参数   | 说明                     |
|--------|--------------------------|
| 名称   | 用户组名称。              |
| 用户   | 将用户添加到该用户组中。  |



### 资产管理
1. 手动创建资产
  - 进入``` 控制台 ```
  - 点击``` 资产管理 ``` - ``` 资产列表 ``` 进入页面
  - 点击页面左上角的``` 创建 ```按钮，选择资产类型（以 Linux 主机为例），进入资产创建页面，填写资产详细信息。

![](/imgs/jumpserver_guide/img07.png)

| 参数       | 说明                                                                                           |
|------------|------------------------------------------------------------------------------------------------|
| 名称       | 必填项，该资产在 JumpServer 中的名称，与资产本身计算机名无关，不可重名。                          |
| IP/主机    | 必填项，资产的真实 IP 或 VIP 或域名。允许重名。                                                    |
| 资产平台   | 默认项，资产的资产平台，各个平台可以设置不同的字符编码及连接参数以及改密命令。                      |
| 节点       | 必填项，该资产所属于的节点。                                                                     |
| 协议组     | 必填项，资产访问时用到的协议，可选一个或多个。                                                    |
| 账号列表   | 必填项，该资产的账号，可创建多个账号。账号与资产绑定。                                             |
| 网域       | 可选项，针对某些跨网段资产，需要以网域网关（sshpass）为代理进行访问。                              |
| 标签       | 可选项，给该资产添加的标签, 方便管理。                                                             |
| 激活       | 必选项，该资产是否可使用。                                                                       |


2. 通过 Excel 批量导入资产
  - JumpServer 提供两种模板信息，csv 与 xlsx 
  - 进入``` 控制台 ```
  - 点击``` 资产管理 ``` - ``` 资产列表 ``` 点击资产分类进入具体的分类页面
  - 首次导入资产，可点击资产列表的右上角导入按钮，下载导入模板后根据模板提示填写需要导入或更新的信息，填写完成后在导入页面导入文件即可。

![](/imgs/jumpserver_guide/img10.png)

### 权限管理
1. 授权简述
  - 资产的授权规则通过三个维度确定用户拥有什么样的权限；
  - 资产授权规则三个维度分别如下:

| 维度   | 说明                                                                                  |
|--------|---------------------------------------------------------------------------------------|
| 用户   | 用户维度主要包括用户与用户组（代表该用户组下所有的用户）                                |
| 资产   | 资产维度主要包括资产、节点（资产组的概念，代表该节点下的所有资产）、账号（登录资产的账号）|
| 动作   | 动作维度主要包括连接权限、上传下载权限、复制粘贴权限（仅支持SSH协议、RDP协议和VNC协议） |


2. 创建资产授权规则
  - 进入``` 控制台 ```
  - 点击``` 授权管理 ``` - ``` 资产授权 ``` 进入页面
  - 点击``` 创建 ```按钮，进入资产授权创建页面


**如示例图，创建了``` user组 ```用户授权``` /DEFAULT/Linux主机 ```节点的权限**

![](/imgs/jumpserver_guide/img11.png)



| 参数       | 说明                                                                                                                                                       |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 名称       | 授权规则的名称。                                                                                                                                           |
| 用户       | JumpServer 登录用户，即给该用户授权后续资产的连接或其它权限。                                                                                               |
| 用户组     | JumpServer 登录用户组，即给该用户组授权后续资产的连接或其它权限。                                                                                           |
| 资产       | 授权的资产，即用户需求连接的资产。                                                                                                                         |
| 节点       | 授权的节点，即用户需求连接的资产组。                                                                                                                       |
| 账号       | 授权资产登录的账号。                                                                                                                                       |
|            | A. 所有账号：资产上添加的所有账号都授权；                                                                                                                   |
|            | B. 指定账号：手动输入需要授权的账号名称；                                                                                                                   |
|            | C. 手动输入：授权用户连接时自行输入用户名/密码；                                                                                                            |
|            | D. 同名账户：授权用户连接时使用与用户同名的账号。                                                                                                           |
| 协议       | A. 所有：所有协议均可使用;                                                                                                                                  |
|            | B. 指定: 指定用户使用 SSH、SFTP、RDP 等协议。                                                                                                              |
| 权限       | 授权的动作，即用户对资产可以做什么。                                                                                                                       |
|            | 注：剪贴板权限控制目前仅支持 RDP/VNC 协议的连接。                                                                                                           |
| 开始日期   | 该授权规则开始的时间，默认为该授权规则创建的时间。                                                                                                           |
| 失效日期   | 该授权规则失效的时间。                                                                                                                                     |
### 应用发布机部署
留坑

## JumpServer管理员手册
该章节包含JumpServer堡垒机**审计员**基础操作


留坑

## JumpServer用户手册
该章节包含JumpServer堡垒机**用户**基础操作


留坑

